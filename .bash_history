exit
sudo docker swarm leave
docker --help
exit
sudo docker swarm leave
exit
sudo yum install -y yum-utils device-mapper-persistent-data lvm2
sudo yum-config-manager -y --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install -y docker-ce
sudo systemctl start docker
sudo docker swarm init
ssh 10.128.64.151
ssh uc-kafka-vm-2
ls
cd ~/.ssh
ls

sudo ssh uc-kafka-vm-2
sudo ssh 10.128.64.151
sudo ssh uc-kafka-vm-4
sudo ssh 10.128.64.149
sudo ssh -i ~/.ssh/uc-kafka-key.pem  uc-kafka-vm-4
sudo ssh -i ~/.ssh/uc-kafka-key.pem 10.128.64.149
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@10.128.64.149
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@10.128.64.151:~/.ssh/
cd home/etc
vi ~/etc/hosts
sudo vi ~/etc/hosts
sudo chmod 777 ~/etc/hosts
sudo chmod 777 ~/etc
sudo vi ~/etc/hosts
sudo chmod777 ~/etc/hosts
sudo chmod 777 ~/etc/hosts
sudo chmod 777 /home/centos/etc/hosts
sudo chmod 777 /home/centos/etc/
sudo chmod 777 /home/centos/etc
sudo cat /home/centos/etc/hosts
cd ~/etc
cd home/centos/hosts
cd /etc
ls
sudo vi hosts
cd ~
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@10.128.64.151:~/.ssh/
sudo ssh uc-kafka-vm-2
ping 10.128.64.151
ping uc-kafka-vm-2
reboot
sudo reboot
ping uc-kafka-vm-2
cat etc/hosts
cd etc
cd /etc
cat hosts
sudo ssh 10.128.64.151
sudo ssh -i ~/.ssh/uc-kafka-key.pem  10.128.64.151
sudo ssh -i ~/.ssh/uc-kafka-key.pem  centos@10.128.64.151
sudo ssh -i ~/.ssh/uc-kafka-key.pem  centos@uc-kafka-vm-2
sudo vi /etc/hosts
sudo ssh -i ~/.ssh/uc-kafka-key.pem  centos@uc-kafka-vm-2
cd ~/.ssh
ls
cat authorized_keys 
cat uc-kafka-key.pem 
cd ~
mkdir kafka
ls
exit
cd kafka/
ls
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem uc-kafka-vm-2:~/.ssh/
exit
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@10.128.64.151:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo ssh centos@uc-kafka-vm-4
sudo ssh centos@uc-kafka-vm-2
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-5:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem -y ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5:~/.ssh/
sudo scp -y  -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem -y centos@uc-kafka-vm-5:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem  centos@uc-kafka-vm-5:~/.ssh/ -y
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem  centos@uc-kafka-vm-5:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5:~/.ssh/
cat /etc/hosts
sudo vi /etc/hosts
sudo vi ~/.ssh/config
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
cat /root/.ssh/known_hosts
sudo cat /root/.ssh/known_hosts
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
exit
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo cat /root/.ssh/known_hosts 
sudo vi /root/.ssh/known_hosts 
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo vi /root/.ssh/known_hosts 
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo vi /etc/hosts
sudo vi ~/.ssh/config
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem  ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5:~/.ssh/
sudo docker swarm 
sudo docker swarm join
sudo docker swarm join-token
exit
sudo docker swarm token
sudo docker swarm join-token
sudo docker swarm join-token --help
docker swarm join-token worker
sudo docker swarm join-token worker
sudo systemctl start docker
sudo docker swarm join-token worker
exit
sudo docker swarm join-token worker
exit
cd kafka/
ls
exit
cd kafka/
sudo vi docker-compose.yml 
sudo docker node promote uc-kafka-vm-2 uc-kafka-vm-3
sudo docker node promote uc-kafka-vm-2
sudo docker node ls
sudo docker node promote uc-kafka-vm-2.novalocal uc-kafka-vm-3.novalocal
sudo docker stack
sudo docker stack ls
sudo docker stack rm kafka
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker stack rm kafka
ssh uc-kafka-vm-2
sudo ssh uc-kafka-vm-2
ssh uc-kafka-vm-3
ssh uc-kafka-vm-4
sudo ssh uc-kafka-vm-3
sudo ssh uc-kafka-vm-4
sudo ssh uc-kafka-vm-5
sudo ssh -i ~/.ssh/uc-kafka-key-pem uc-kafka-vm-2
cd ~/.ssh/
ls
cat authorized_keys 
ls -la
cat ~/.ssh/known_host
cd ...
cd ~
sudo docker node ls
sudo docker service ls
cd kafka/
sudo docker deploy stack docker-compose.yml kafka
ls
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker service scale kafka_zookeeper=3
sudo docker service ls
sudo docker swarm rm kafka
sudo docker stack rm kafka
exit
sudo docker node ls
sudo docker rm ag
sudo docker node rm ag
sudo docker node rm x3
sudo docker node ls
sudo docker demote node 9b
sudo docker node demote 9b
sudo docker node demote lw
sudo docker node ls
sudo docker node stop 9b
sudo docker node rm 9b
ssh uc-kafka-vm-2
sudo ssh uc-kafka-vm-2
sudo ssh -i ~/.ssh/uc-kafka-key.pem uc-kafka-vm-2
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2
sudo docker node ls
sudo docker rm lw

sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3
sudo docker node ls
sudo docker rm 9b
sudo docker node rm 9b
ls
sudo docker node ls
sudo vi  /etc/ssh/ssh_known_hosts
sudo cat  /etc/ssh/ssh_known_hosts
sudo cd /etc/ssh/
ls
sudo cd /etc/ssh/
sudo cd /etc/
sudo cd /etc
sudo cd home/etc/
cd ~/etc
cd /home/centos/etc
cd /home/centos/etc/
cd ~/etc/
cd ~/.ssh/
ls
cd ~
ls
cd /etc/ssh/
ls
cd ssh_config 
vi ssh_config 
vi ssh_known_hosts
ls
cd ~
cd ~/.ssh
ls
sudo vi config 
cd /etc/
ls
cd ssh/
ls
cd ..
sudo vi hosts
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2:~/.ssh/
sudo vi /root/.ssh/known_hosts
exit
sudo docker stack rm kafka/
sudo docker services ls
sudo docker service ls
sudo docker node ls
sudo docker stack ls
sudo docker stack rm kafka/
sudo docker stack ls
sudo docker stack --help
sudo docker stack rm kafka/
sudo docker service ls
sudo docker stack ls
sudo docker stack rm kafka/
sudo docker stack rm kafka
sudo vi /root/.ssh/known_hosts
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/config centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/config centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/config centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/config centos@uc-kafka-vm-5:~/.ssh/
exit
sudo docker node promote uc-kafka-vm-2.novalocal
sudo docker node ls
sudo vi /root/.ssh/known_hosts
sudo docker service ls
sudo docker stack rm kafka
history | grep ssh
sudo ssh -i ~/.ssh/uc-kafka-key.pem uc-kafka-vm-2
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2 'sudo docker swarm leave'
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3 'sudo docker swarm leave'
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4 'sudo docker swarm leave'
sudo ssh -i ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5 'sudo docker swarm leave'
sudo docker node ls
sudo docker node rm r3 11 09 z5
sudo docker node rm o9
sudo docker node ls
sudo vi ~/.ssh/hosts
sudo vi ~/etc/hosts
cd /etc/
ls
sudo vi hosts
sudo vi ~/.ssh/config
sudo vi /root/.ssh/known_hosts
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-2:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-3:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-4:~/.ssh/
sudo scp -i ~/.ssh/uc-kafka-key.pem ~/.ssh/uc-kafka-key.pem centos@uc-kafka-vm-5:~/.ssh/
exit
docker stack ls
sudo docker stack ls
sudo docker stack rm kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker stack rm kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker stack rm kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker service ls
sudo docker stack rm kafka
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker service ls
sudo docker service scale kafka_elasticsearch=2
sudo docker service rm kafka
sudo docker service ls
sudo docker stack rm kafka
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo docker -v service scale kafka_elasticsearch=2
sudo docker service ps
sudo docker service ps kafka_elasticsearch
sudo docker service  --help
sudo docker service logs kafka_elasticsearch
sudo docker service rm kafka_elasticsearch
sudo docker service ps kafka_elasticsearch
sudo docker service ps 
sudo docker stack rm kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi ~/kafka/docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
 docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:tag
sudo  docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:tag
sudo docker stack rm kafka
cd ~
ls
mkdir elk
cd elk
cd..
ls
cd ..
ls
cd elk/
sudo sysctl -w vm.max_map_count=262144
alias git='docker run -it --rm --name git -v $PWD:/git -w /git alpine/git'
git version
sudo git version
sudo alias git='docker run -it --rm --name git -v $PWD:/git -w /git alpine/git'
alias git='docker run -it --rm --name git -v $PWD:/git -w /git alpine/git'
git version
sudo git version
sudo apt-install git
sudo apt-install git-core
sudo yum install git-core
git clone https://github.com/shazChaudhry/docker-elastic.git
sudo git clone https://github.com/shazChaudhry/docker-elastic.git
ls
sudo chown -R $USER:$USER docker-elastic
cd docker-elastic/
export ELASTIC_VERSION=6.6.0
export ELASTICSEARCH_USERNAME=elastic
export ELASTICSEARCH_PASSWORD=changeme
export ELASTICSEARCH_HOST=node1
docker network create --driver overlay --attachable elastic
docker stack deploy --compose-file docker-compose.yml elastic
sudo docker stack deploy --compose-file docker-compose.yml elastic
sudo docker network create --driver overlay --attachable elastic
docker stack deploy --compose-file docker-compose.yml elastic
sudo docker stack deploy --compose-file docker-compose.yml elastic
cd ..
cd ~/kafka/
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
ls
sudo docker stack deploy --compose-file docker-compose.yml elastic
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
sudo vi docker-compose.yml 
sudo docker stack deploy -c ~/kafka/docker-compose.yml kafka
~/elk/
cd ~/elk/
ls
cd docker-elastic/
ls
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo docker stack deploy --compose-file docker-compose.yml elastic
ls
cd elk/
ls
cd logstash/
ls
cd config/pipeline/
ls
cat logstash.conf 
cd ../../../..
ls
sudo chmod 777 /elk/logstash/config/pipeline/sudo chown -R $USER:$USER docker-elastic
sudo chown -R $USER:$USER docker-elastic
cd ~/elk
sudo chown -R $USER:$USER docker-elastic
cd docker-elastic/
sudo docker stack deploy --compose-file docker-compose.yml kafka
ls
sudo vi docker-compose.yml 
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo vi docker-compose.yml 
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo cat /elk/logstash/config/pipeline/logstash.conf
sudo vi docker-compose.yml 
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo cat /home/centos/docker-elastic/elk/logstash/config/pipeline/logstash.conf
ls /home/centos/docker-elastic/elk/logstash/config/pipeline
ls /home/centos/docker-elastic/elk/logstash/config
sudo ls /home/centos/docker-elastic/elk/logstash/config/pipeline
sudo ls /home/centos/docker-elastic
sudo ls /home/centos
sudo chmod 777 ~/elk/docker-elastic/
cd ..
sudo chmod 777 ~/elk/docker-elastic/
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo chmod 777 ~/elk/docker-elastic/docker-compose.yml 
sudo docker stack deploy --compose-file docker-compose.yml kafka
cd docker-elastic/
ls
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo chmod 777 /home/centos/docker-elastic/elk/logstash/config/pipeline/logstash.conf
sudo chmod 777 /home/centos/docker-elastic/elk/logstash/config/pipeline/
sudo chmod 777 /home/centos/docker-elastic/elk/logstash/config/pipeline
sudo chmod 777 /elk/logstash/config/pipeline/logstash.conf
sudo chmod 777 /elk/
sudo chmod 777 /elk
sudo docker stack deploy docker-compose.yml kafka
sudo docker stack deploy docker-compose.yml elastic
sudo docker stack deploy -c ~/elk/docker-elastic/docker-compose.yml kafka
cd ~

sudo chmod -R 775 /elk/
ls
sudo chmod -R 775 ~/elk/
cd elk/docker-elastic/
sudo docker stack deploy --compose-file docker-compose.yml kafka
sudo docker stack deploy -c ~/elk/docker-elastic/docker-compose.yml kafka
exit
